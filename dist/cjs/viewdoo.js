/*! @ryanmorr/viewdoo v1.0.4 | https://github.com/ryanmorr/viewdoo */
"use strict";
/*! @ryanmorr/csscope v0.1.1 | https://github.com/ryanmorr/csscope */
/*! @ryanmorr/amble v0.1.2 | https://github.com/ryanmorr/amble */const e=/([^{};]*)([;{}])/g,t=/(\r\n|\r|\n)+/g,n=/\t/g,r=/\s{2,}/g,s=/\/\*[\W\w]*?\*\//g,u=/\s*([:;{}])\s*/g,c=/\};+/g,i=/([^:;{}])}/g,o=/^(?:\\.|[\w\-\u00c0-\uFFFF])+/,l=/^:((?:\\.|[\w\u00c0-\uFFFF-])+)(?:\((['"]?)((?:\([^)]+\)|[^()]*)+)\2\))?/,a=/^\[((?:\\.|[\w\u00c0-\uFFFF-])+)\s*(?:(\S?=)\s*(?:(['"])([^]*?)\3|(#?(?:\\.|[\w\u00c0-\uFFFF-])*)|)|)\s*(i)?\]/,f=/@keyframes\s*((?:\\.|[\w\-\u00c0-\uFFFF])+)/gi,h=/^(animation(?:-name)?)\s*:\s*(.*)$/;
/*! @ryanmorr/schedule-render v3.0.2 | https://github.com/ryanmorr/schedule-render */
let p,m;const g=[],F=5;function d(){return performance.now()}function _(){return g.length>0}function q(){m=d();do{_()&&g.shift()()}while(d()-m<F);p=null,_()&&(p=requestAnimationFrame(q))}const w=/<style>([\s\S]*?)<\/style>/,$=/<script>([\s\S]*?)<\/script>/,y=/(\r\n|\r|\n)/g,A=/{{\s*(.+?)\s*}}/g,b=/^each\s+(.*)\s+as\s+(.*)$/,v=/^if\s+(.*)$/,x=/^else if\s+(.*)$/,W="viewdoo-",E=document.createElement("template");function j(){return Math.random().toString(36).substring(2,9)}function S(p,m){const g=document.createElement("style");g.setAttribute(m,""),g.innerHTML=function(p,m){const g=[];m=function(e,t,n){return e.replace(f,((e,r)=>(n.push(r),"@keyframes "+t+"-"+r)))}(m,p,g);let F="",d=!1,_=0;return function(o,l){o=function(e){return e.replace(t," ").replace(n," ").replace(r," ").replace(s,"").trim().replace(u,"$1").replace(c,"}").replace(i,"$1;}")}(o),e.lastIndex=0;for(let t;null!=(t=e.exec(o));)l(t[1],t[2])}(m,((e,t)=>{"{"==t?(d&&_++,"@"===e.charAt(0)?(e.startsWith("@keyframes")&&(d=!0,_++),F+=e):F+=d?e:function(e,t){const n="["+t+"]";let r=0,s=!1,u=!1,c=!1;function i(e){r+=e}function f(t){e=e.slice(0,t)+n+e.slice(t),i(n.length)}function h(t,n){return t=r+t,e.substring(t,t+n)}function p(t){i(e.substring(r).match(t)[0].length)}function m(){let t=1;for(;g(e.charAt(r+t));)t++;i(t)}function g(e){return" "===e||"\n"===e||"\t"===e||"\f"===e||"\r"===e}function F(){return!u&&!c}for(;r<e.length;){const t=e.charAt(r);g(t)?(s=!0,m()):">"===t||"~"===t||"+"===t?(F()&&f(s?r-1:r),">>>"===h(0,3)?(e=e.slice(0,s?r-1:r)+(s?"":" ")+e.slice(r+3),c=!0):i(1),u=s=!1,m()):","===t?(F()&&f(g(h(-1,1))?r-1:r),u=c=s=!1,m()):(s&&(F()&&f(r-1),s=!1),"*"===t?i(1):"#"===t||"."===t?(i(1),p(o)):"["===t?(F()&&(f(r),u=!0),p(a)):":"===t?(F()&&(f(r),u=!0),"::"===h(0,2)?(i(2),p(o)):p(l)):o.test(e.substring(r))&&p(o))}return F()&&(e+=n),e}(e.trim(),p),F+="{\n"):"}"==t?(F+="}\n",d&&(_--,0===_&&(d=!1))):";"==t&&(e.startsWith("animation")&&g.length>0?F+=function(e,t,n){const r=e.match(h),s=r[1],u=r[2].split(",");for(let e=0,r=u.length;e<r;e++){const r=u[e].trim().split(" "),s=r[0];n.includes(s)&&(r[0]=t+"-"+s),u[e]=r.join(" ")}return s+":"+u.join(",")}(e,p,g)+";\n":F+=e+";\n")})),F}(m,p),document.head.appendChild(g)}module.exports=function(e){const[t,n]=function(e){let t,n,r;const s=e.replace(w,((e,t)=>(n=t.trim())&&"")).replace($,((e,n)=>(t=n.trim())&&"")).trim().replace(y,"\\n");return n&&(r=W+j(),S(n,r)),[r,new Function(`\n        with (this) {\n            ${t}\n            return function() {\n                let _strings = [], _sequence = [], _values = [];\n                _sequence.push('${s.replace(A,((e,t)=>{if(t.startsWith("each")){let e=b.exec(t);if(e)return`'); (${e[1]}).forEach((${e[2]}) => { _sequence.push('`}else if(t.startsWith("if")){let e=v.exec(t);if(e)return`'); if (${e[1]}) { _sequence.push('`}else if(t.startsWith("else if")){let e=x.exec(t);if(e)return`'); } else if (${e[1]}) { _sequence.push('`}else{if("else"===t)return"'); } else { _sequence.push('";if("/each"===t)return"'); }); _sequence.push('";if("/if"===t)return"'); } _sequence.push('"}return`'); _strings.push(_sequence.join('')); _sequence = []; _values.push(${t}); _sequence.push('`}))}');\n                _strings.push(_sequence.join(''));\n                return [_strings, _values];\n            };\n        }\n    `)]}(e);return(e={})=>{let r,s,u,c=!1;const i=()=>{const[e,n]=r(),c=function(e,t,n){const r={};E.innerHTML=e.reduce(((e,n,s)=>{let u=t[s-1];if("function"==typeof u){let e=j();r[e]=u,u=e}return e+u+n}));const s=E.content;return s.querySelectorAll("*").forEach((e=>{const t=e.attributes;for(let n=0;n<t.length;n++){const s=t[n].name,u=t[n].value;s.startsWith("on")&&u in r&&(e.removeAttribute(s),e.addEventListener(s.slice(2).toLowerCase(),r[u]))}n&&e.setAttribute(n,"")})),s}(e,n,t),i=Array.from(c.childNodes);return u||(u=document.createTextNode(""),c.appendChild(u)),s&&(s.forEach((e=>e.remove())),u.parentNode.insertBefore(c,u)),s=i,c},o=new Proxy(e,{set(e,t,n){const s=e[t];return e[t]=n,r&&!c&&(n!==s||n&&"object"==typeof n)&&(c=!0,function(e){new Promise((t=>{p||(p=requestAnimationFrame(q)),g.push((()=>t(e())))}))}((()=>{i(),c=!1}))),!0}});return r=n.call(o),[i(),o]}};
