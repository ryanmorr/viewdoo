/*! @ryanmorr/viewdoo v1.0.1 | https://github.com/ryanmorr/viewdoo */function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_nonIterableRest()}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _iterableToArrayLimit(a,b){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function unwrapExports(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a["default"]:a}function createCommonjsModule(a,b){return b={exports:{}},a(b,b.exports),b.exports}var frame,start,csscope_esm=createCommonjsModule(function(a,b){function j(b){return b.replace(n," ").replace(o," ").replace(p," ").replace(q,"").trim().replace(r,"$1").replace(s,"}").replace(t,"$1;}")}function k(p,q){function r(b){k+=b}function b(a){p=p.slice(0,a)+i+p.slice(a),r(i.length)}function c(a,d){return a=k+a,p.substring(a,a+d)}function d(a){var b=p.substring(k).match(a)[0];r(b.length)}function e(){for(var a=1;f(p.charAt(k+a));)a++;r(a)}function f(b){return" "===b||"\n"===b||"\t"===b||"\f"===b||"\r"===b}function g(){return!t&&!u}for(var h,i="["+q+"]",k=0,s=!1,t=!1,u=!1;k<p.length;)h=p.charAt(k),f(h)?(s=!0,e()):">"===h||"~"===h||"+"===h?(g()&&b(s?k-1:k),">>>"===c(0,3)?(p=p.slice(0,s?k-1:k)+(s?"":" ")+p.slice(k+3),u=!0):r(1),t=s=!1,e()):","===h?(g()&&b(f(c(-1,1))?k-1:k),t=u=s=!1,e()):(s&&(g()&&b(k-1),s=!1),"*"===h?r(1):"#"===h||"."===h?(r(1),d(v)):"["===h?(g()&&(b(k),t=!0),d(x)):":"===h?(g()&&(b(k),t=!0),"::"===c(0,2)?(r(2),d(v)):d(w)):v.test(p.substring(k))&&d(v));return g()&&(p+=i),p}function l(d,e,b){return d.replace(y,function(c,a){return b.push(a),"@keyframes "+e+"-"+a})}function m(i,a,b){for(var c=i.match(z),d=c[1],e=c[2],f=e.split(","),g=0,m=f.length;g<m;g++){var j=f[g].trim().split(" "),k=j[0];b.includes(k)&&(j[0]=a+"-"+k),f[g]=j.join(" ")}return d+":"+f.join(",")}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=void 0;var n=/(\r\n|\r|\n)+/g,o=/\t/g,p=/\s{2,}/g,q=/\/\*[\W\w]*?\*\//g,r=/\s*([:;{}])\s*/g,s=/\};+/g,t=/([^:;{}])}/g,u=/([^{};]*)([;{}])/g,v=/^(?:\\.|[\w\-\u00c0-\uFFFF])+/,w=/^:((?:\\.|[\w\u00c0-\uFFFF-])+)(?:\((['"]?)((?:\([^)]+\)|[^()]*)+)\2\))?/,x=/^\[((?:\\.|[\w\u00c0-\uFFFF-])+)\s*(?:(\S?=)\s*(?:(['"])([^]*?)\3|(#?(?:\\.|[\w\u00c0-\uFFFF-])*)|)|)\s*(i)?\]/,y=/@keyframes\s*((?:\\.|[\w\-\u00c0-\uFFFF])+)/ig,z=/^(animation(?:-name)?)\s*:\s*(.*)$/;b["default"]=function(n,a){var o=[];a=l(j(a),n,o);var c="",p=!1,q=0;u.lastIndex=0;for(var r;null!=(r=u.exec(a));)if("{"==r[2]){var s=r[1];p&&q++,"@"===s.charAt(0)?(s.startsWith("@keyframes")&&(p=!0,q++),c+=s):p?c+=s:c+=k(s.trim(),n),c+="{\n"}else if("}"==r[2])c+="}\n",p&&(q--,0==q&&(p=!1));else if(";"==r[2]){var h=r[1];c+=h.startsWith("animation")&&0<o.length?m(h,n,o)+";\n":h+";\n"}return c}}),csscope=unwrapExports(csscope_esm),tasks=[],THRESHOLD=5;function getTime(){return performance.now()}function hasTasks(){return 0<tasks.length}function isWithinBudget(){return getTime()-start<THRESHOLD}function flush(){start=getTime();do hasTasks()&&tasks.shift()();while(isWithinBudget());frame=null,hasTasks()&&(frame=requestAnimationFrame(flush))}function scheduleRender(c){return new Promise(function(a){frame||(frame=requestAnimationFrame(flush)),tasks.push(function(){return a(c())})})}var STYLE_RE=/<style>([\s\S]*?)<\/style>/,SCRIPT_RE=/<script>([\s\S]*?)<\/script>/,NEW_LINES_RE=/(\r\n|\r|\n)/g,TEMPLATE_RE=/{{\s*(.+?)\s*}}/g,EACH_RE=/^each\s+(.*)\s+as\s+(.*)$/,IF_RE=/^if\s+(.*)$/,ELSE_IF_RE=/^else if\s+(.*)$/,CSS_ATTR_PREFIX="viewdoo-",template=document.createElement("template");function uuid(){return Math.random().toString(36).substring(2,9)}function createStyleSheet(a,b){var c=document.createElement("style");c.setAttribute(b,""),c.innerHTML=csscope(b,a),document.head.appendChild(c)}function parseHTML(a,b,c){var d={};template.innerHTML=a.reduce(function(a,c,e){var f=b[e-1];if("function"==typeof f){var g=uuid();d[g]=f,f=g}return a+f+c});var e=template.content;return e.querySelectorAll("*").forEach(function(a){for(var b=a.attributes,e=0;e<b.length;e++){var f=b[e].name,g=b[e].value;f.startsWith("on")&&g in d&&(a.removeAttribute(f),a.addEventListener(f.slice(2).toLowerCase(),d[g]))}c&&a.setAttribute(c,"")}),e}function parseView(a){var b,c,d,e=a.replace(STYLE_RE,function(a,b){return(c=b.trim())&&""}).replace(SCRIPT_RE,function(a,c){return(b=c.trim())&&""}).trim().replace(NEW_LINES_RE,"\\n");return c&&(d=CSS_ATTR_PREFIX+uuid(),createStyleSheet(c,d)),[d,new Function("\n        with (this) {\n            ".concat(b,"\n            return function() {\n                let _strings = [], _sequence = [], _values = [];\n                _sequence.push('").concat(e.replace(TEMPLATE_RE,function(a,b){if(b.startsWith("each")){var c=EACH_RE.exec(b);if(c)return"'); (".concat(c[1],").forEach((").concat(c[2],") => { _sequence.push('")}else if(b.startsWith("if")){var d=IF_RE.exec(b);if(d)return"'); if (".concat(d[1],") { _sequence.push('")}else if(b.startsWith("else if")){var e=ELSE_IF_RE.exec(b);if(e)return"'); } else if (".concat(e[1],") { _sequence.push('")}else{if("else"===b)return"'); } else { _sequence.push('";if("/each"===b)return"'); }); _sequence.push('";if("/if"===b)return"'); } _sequence.push('"}return"'); _strings.push(_sequence.join('')); _sequence = []; _values.push(".concat(b,"); _sequence.push('")}),"');\n                _strings.push(_sequence.join(''));\n                return [_strings, _values];\n            };\n        }\n    "))]}function viewdoo(a){var b=parseView(a),c=_slicedToArray(b,2),d=c[0],e=c[1];return function(){var a,b,c,f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},g=!1,h=function(){var e=a(),f=_slicedToArray(e,2),g=f[0],h=f[1],i=parseHTML(g,h,d),j=Array.from(i.childNodes);return c||(c=document.createTextNode(""),i.appendChild(c)),b&&(b.forEach(function(a){return a.remove()}),c.parentNode.insertBefore(i,c)),b=j,i},i=new Proxy(f,{set:function(b,c,d){var e=b[c];return b[c]=d,a&&!g&&(d!==e||d&&"object"===_typeof(d))&&(g=!0,scheduleRender(function(){h(),g=!1})),!0}});return a=e.call(i),[h(),i]}}export default viewdoo;
